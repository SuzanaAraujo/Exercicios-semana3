<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Portfólio de veículos</title>
  </head>
  <body>
    <header>Venda de veículos</header>
    <nav>
      <ul>
        <li><a href="index.html">Início</a></li>
        <li><a href="cadastro-marca.html">Cadastrar marcas</a></li>
        <li><a href="#">Cadastrar modelos</a></li>
        <li><a href="cadastro-veiculo.html">Cadastrar veículos</a></li>
      </ul>
    </nav>
    <div>
      <h1>Cadastrar Modelo de veículo</h1>
      Marcas cadastradas:
      <select name="selectMarcas" id="selectMarcas"></select>
      Modelo: <input type="text" name="nome-modelo" />

      <button onclick="cadastrarModelo()">Adicionar</button>
    </div>

    <script>
      criarOpcoes();

      //inserir opções de seleção de marcas no HTML

      function criarOpcoes() {
        const seletorMarcas = document.getElementById("selectMarcas");
        const marcas = JSON.parse(localStorage.getItem("Lista-Marcas"));
        marcas.forEach((marca) => {
          const option = document.createElement("option");
          option.innerText = marca;
          option.value - marca;
          seletorMarcas.appendChild(option);
        });
      }

      //pegar os inputs de modelo e marca

      var modelos = [];

      function cadastrarModelo() {
        const inputModelo = document.getElementsByName("nome-modelo")[0].value;
        const inputMarca = document.getElementById("selectMarcas").value;

        if (inputModelo == "") {
          alert("Cadastre um modelo para a marca selecionada");
        } else {
          alert(
            `Modelo ${inputModelo} da marca ${inputMarca} cadastrado com sucesso!`
          );
          funcaoModelo(inputModelo, inputMarca);
          localStorage.setItem("Lista-Modelos", JSON.stringify(modelos));
          console.log(modelos);
        }
      }
      function funcaoModelo(nomeModelo, nomeMarca) {
        const objetoModelo = {
          nome: nomeModelo,
          marca: nomeMarca,
        };
        modelos.push(objetoModelo);
      }
    </script>
  </body>
</html>
