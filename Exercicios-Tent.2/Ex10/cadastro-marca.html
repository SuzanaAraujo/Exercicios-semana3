<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de marcas</title>
  </head>
  <body>
    <header>Venda de veículos</header>
    <nav>
      <ul>
        <li><a href="index.html">Início</a></li>
        <li><a href="#">Cadastrar marcas</a></li>
        <li><a href="cadastro-modelo.html">Cadastrar modelos</a></li>
        <li><a href="cadastro-veiculo.html">Cadastrar veículos</a></li>
      </ul>
    </nav>
    <div>
      <h1>Cadastrar Marca de veículo</h1>
      Marca: <input type="text" name="nome-marca" />
      <button onclick="cadastrarMarca()">Adicionar</button>
    </div>
    <section>
      <h1>Lista de Marcas Cadastradas</h1>
      <ul id="listaMarcas"></ul>
    </section>

    <script>
      var marcasJSON = localStorage.getItem("Lista-Marcas");
      if (marcasJSON) {
        var marcas = JSON.parse(marcasJSON);
      } else {
        marcas = [];
      }
      // mesma coisa que
      //var marcas = marcasJSON ? JSON.parse(marcasJSON) : [];

      var ulMarcas = document.getElementById("listaMarcas");

      for (const nomeMarca of marcas) {
        var liMarcas = document.createElement("li");
        liMarcas.classList = "marca";
        liMarcas.innerText = nomeMarca;
        ulMarcas.appendChild(liMarcas);
      }

      function cadastrarMarca() {
        const inputMarca = document.getElementsByName("nome-marca")[0];

        if (inputMarca.value == "") {
          alert("Adicione uma marca para cadastrar");
        } else {
          var liMarcas = document.createElement("li");
          liMarcas.classList = "marca";
          liMarcas.innerText = inputMarca.value;
          ulMarcas.appendChild(liMarcas);
          marcas.push(inputMarca.value);
          localStorage.setItem("Lista-Marcas", JSON.stringify(marcas));
          alert(`Marca ${inputMarca.value} cadastrada com sucesso!`);
          inputMarca.value = "";
        }
        function listarMarcasCadastradas() {
          return marcas;
        }
        console.log(listarMarcasCadastradas());
      }
    </script>
  </body>
</html>
